<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HT32SX Generic Push Button: Generic Push Button Application for HT32SX</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="htlogo_git2.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HT32SX Generic Push Button
   </div>
   <div id="projectbrief">Generic Push Button application for HT32SX</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__c_1__generic__push__button__generic_push_button.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Generic Push Button Application for HT32SX </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div align="center"> <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSesenrhZDRBpVRdUHpQ5ouT6wUTu0t0zaYtSI5GZqXJjGc2tor4Q&amp;s" alt="" class="inline"/> </div><h2><a class="anchor" id="autotoc_md1"></a>
Introduction</h2>
<p>The iMCP is a Multicomponent Integrated Circuit (MCO) built for the Internet of Things, it provides a ready-to-use connectivity solution for the SigFox™ network. The system combines an ARM Cortex M0+ 32bit, a S2-LP high performance, ultra-low power RF transceiver and a RF Power Amplifier with all of the advantages, integration and convenience found in a SiP (System In Package), which is one of the most advanced semiconductor packaging technology. As a SigFox™ Monarch enabled device, it can operate in all regions covered by SigFox™ Network without need of reconfiguration. This is possible because the device can detect the region of operation and rearrange its setup automatically.</p>
<h2><a class="anchor" id="autotoc_md2"></a>
About this document</h2>
<p>The purpose of this document is to assist the engineer and explain how the SigFox™ protocol can be used on the iMCP – HT32SX. The firmware described in this document is version 4.19.50, it has integrated SigFox™ and SigFox™ Monarch driver support, which simplifies the usage of resources and the access to the SigFox™ network. The measurements and analysis included in this application note is based upon HT Micron’s interpretation of both measurements and rules. It is recommended to read this application note in conjunction with HT Micron User’s Guide. The whole application can be viwed clicking on the "Files" tab on the left hand.</p>
<p>This application note explore simple way to send a message, triggered by a button, to the SigFox™ Network.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Application description</h2>
<p>The application starts configuring the MCU peripherals needed for the transceiver operation and the Universal Synchronous Asynchronous Receiver Transmitter (USART1), that is necessary to verify the results returned from all of functions used in this software. When everything is ready, the algorithm starts making a polling at the PB0 pin, that is connected with the Evaluation Board button. This will trigger the send message routine which is going to send a payload to the <a href="https://backend.sigfox.com"><b>SigFox™ Backend</b></a>.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Software architecture</h2>
<p>The project was developed at Keil µVision and STM32CubeIDE fallowing the STM32CubeMX patterns. All of the SigFox Libraries are also included.</p>
<p>For organizational purpose, the project was divided by MCU peripherals. The user may see, for example, the RTC implementation looking at the “rtc.c” file. The same was made for GPIO, timers, SPI, and USART.</p>
<div align="center"></div><div align="center"><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name  </th><th class="markdownTableHeadNone">Arguments  </th><th class="markdownTableHeadNone">Descripton   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>configRegion</b>  </td><td class="markdownTableBodyNone">RCZ: Integer corresponding to the radio zone.  </td><td class="markdownTableBodyNone">Set up the device to the region informed by argument.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>sendFrame</b>  </td><td class="markdownTableBodyNone">None  </td><td class="markdownTableBodyNone">Send a frame to the SigFox Network. Returns 0 if success.   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>mcuConfig</b>  </td><td class="markdownTableBodyNone">None  </td><td class="markdownTableBodyNone">Starts the MCU peripherals configuration and get credentials from the internal EEPROM.   </td></tr>
</table>
</div><h2><a class="anchor" id="autotoc_md5"></a>
Results</h2>
<p>Some results are expected running this application. <br  />
</p>
<p>The results can be seen below:</p>
<div align="center"> <b>Terminal Serial (Termite):</b> <br  />
 <img src="https://www.googleapis.com/drive/v3/files/1pUeQhL9OLkak6fPfc2vfLGa-N2ANbMs3?alt=media&amp;key=AIzaSyA3IM3FTM-B4ibyKf1dUPBdbmKgAN9LX-s" alt="" class="inline"/> <br  />
 <br  />
 </div><div align="center"> <b>SigFox Backend:</b> <br  />
 <img src="https://www.googleapis.com/drive/v3/files/1W4PLysIiLgR2Qq6GL-g7hdULO2dla54s?alt=media&amp;key=AIzaSyA3IM3FTM-B4ibyKf1dUPBdbmKgAN9LX-s" alt="" class="inline"/> <br  />
 </div><h2><a class="anchor" id="autotoc_md6"></a>
Extra Documentation</h2>
<p>Datasheets and application notes can be found at the <a href="https://github.com/htmicron/ht32sx"><b>HT32SX Repository</b></a>.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
References</h2>
<p>For additional information about SigFox™ libraries designed by ST Microelectronics, please refer to the UM2173 document (note: the function names still the same, but the code was adapted to use in the iMCP design, so it is different from the one distributed by ST).</p>
<h2><a class="anchor" id="autotoc_md8"></a>
Contact Information</h2>
<p>Head Office – São Leopoldo, RS HT Micron Semiconductors Unisinos Avenue, 1550 São Leopoldo - RS <br  />
 ZIP 93022-750 <br  />
 Brazil <br  />
 Tel: +55 51 3081-8650 <br  />
 E-mail (Support): <a href="#" onclick="location.href='mai'+'lto:'+'sup'+'po'+'rt_'+'io'+'t@h'+'tm'+'icr'+'on'+'.co'+'m.'+'br'; return false;">suppo<span style="display: none;">.nosp@m.</span>rt_i<span style="display: none;">.nosp@m.</span>ot@ht<span style="display: none;">.nosp@m.</span>micr<span style="display: none;">.nosp@m.</span>on.co<span style="display: none;">.nosp@m.</span>m.br</a> <br  />
 E-mail (General Enquiries): <a href="#" onclick="location.href='mai'+'lto:'+'htm'+'ic'+'ron'+'@h'+'tmi'+'cr'+'on.'+'co'+'m.b'+'r'; return false;">htmic<span style="display: none;">.nosp@m.</span>ron@<span style="display: none;">.nosp@m.</span>htmic<span style="display: none;">.nosp@m.</span>ron.<span style="display: none;">.nosp@m.</span>com.b<span style="display: none;">.nosp@m.</span>r</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.16 </li>
  </ul>
</div>
</body>
</html>
